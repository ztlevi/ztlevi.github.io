<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Ting Zhou">
  <!-- Open Graph Data -->
  <meta property="og:title" content="Game theory: Solutions for coins in a line"/>
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="Lady luck is smilin&#39;."/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://ztlevi.github.io"/>
  
    <link rel="alternate" href="/atom.xml" title="Lady luck is smilin&#39;." type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>Lady luck is smilin'.</title>

  <!-- Bootstrap CSS -->
  
<link rel="stylesheet" href="/css/bootstrap.min.css">

  
<link rel="stylesheet" href="/css/font-awesome.min.css">

  <!-- Custom CSS -->
  
  
<link rel="stylesheet" href="/css/style.light.css">


  <!-- Google Analytics -->
  

<meta name="generator" content="Hexo 5.4.2"></head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/banner.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">Game theory: Solutions for coins in a line</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                    Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                    Archives
                  
                </a>
              </li>
            
              <li>
                <a target="_blank" rel="noopener" href="https://github.com/ztlevi">
                  
                    Github
                  
                </a>
              </li>
            
              <li>
                <a target="_blank" rel="noopener" href="https://ztlevi.gitbook.io/ml-101/">
                  
                    ML101
                  
                </a>
              </li>
            
              <li>
                <a href="/about">
                  
                    About
                  
                </a>
              </li>
            
              <li>
                <a href="/categories/nonsense">
                  
                    扯淡
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Ting Zhou</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2017-09-07</span>
            <span class="time">23:07:14</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/coding/">coding</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/coding/">#coding</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h1 id="Solutions-for-tree-coins-in-a-line-problem"><a class="header-anchor" href="#Solutions-for-tree-coins-in-a-line-problem"> &gt; </a>Solutions for tree coins in a line problem</h1>
<p>This is a post for game theory problems. All solutions are written in Python.</p>
<p>I didn’t have to put a lot of details here. Comment below if you have any issue.</p>
<blockquote>
<p>Keep in mind: the current state is generated by its sub states (further states).</p>
</blockquote>
<h2 id="Coins-in-a-line-I"><a class="header-anchor" href="#Coins-in-a-line-I"> &gt; </a>Coins in a line I</h2>
<ul>
<li>
<p>Problem: <a target="_blank" rel="noopener" href="http://www.lintcode.com/en/problem/coins-in-a-line/">http://www.lintcode.com/en/problem/coins-in-a-line/</a></p>
<p>This problem start taking coins from the right side.</p>
</li>
<li>
<p>Solution:</p>
<ol>
<li>DP</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    @param n: an integer</span></span><br><span class="line"><span class="string">    @return: a boolean which equals to True if the first player will win</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">firstWillWin</span>(<span class="params">self, n</span>):</span><br><span class="line">        dp = [<span class="literal">False</span>] * (n+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> (dp[i-<span class="number">1</span>] <span class="keyword">and</span> dp[i-<span class="number">2</span>]):</span><br><span class="line">                dp[i] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> dp[n]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<span id="more"></span>
<p><code>dp[i]</code> represents if the current player can win when i~n coins have been selected.</p>
<p>For <code>not (dp[i-1] and dp[i-2])</code>, <code>dp[i]</code> is <code>True</code> when and only when there is a <code>False</code> in <code>dp[i]</code>'s sub states
<code>dp[i-1]</code> and <code>dp[i-2]</code>. Which means, there is a possible lose for his opponent. <code>dp[i]</code>'s sub states represent the
coins his opponent can gain. We want this value smaller so that we can gain more.</p>
<ol start="2">
<li>Search</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">firstWillWin</span>(<span class="params">self, n</span>):</span><br><span class="line">      <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">i, dp, visited</span>):</span><br><span class="line">          <span class="keyword">if</span> visited[i]:</span><br><span class="line">              <span class="keyword">return</span> dp[i]</span><br><span class="line">          <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">              dp[i] = <span class="literal">False</span></span><br><span class="line">          <span class="keyword">elif</span> i == <span class="number">1</span>:</span><br><span class="line">              dp[i] = <span class="literal">True</span></span><br><span class="line">          <span class="keyword">elif</span> i == <span class="number">2</span>:</span><br><span class="line">              dp[i] = <span class="literal">True</span></span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              dp[i] = <span class="keyword">not</span> (search(i-<span class="number">1</span>, dp, visited) <span class="keyword">and</span> search(i-<span class="number">2</span>, dp, visited))</span><br><span class="line"></span><br><span class="line">          visited[i] = <span class="literal">True</span></span><br><span class="line">          <span class="keyword">return</span> dp[i]</span><br><span class="line"></span><br><span class="line">      dp = [<span class="literal">False</span>] * (n+<span class="number">1</span>)</span><br><span class="line">      visited = [<span class="literal">False</span>] * (n+<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">return</span> search(n, dp, visited)</span><br></pre></td></tr></table></figure>
<h2 id="Coins-in-a-line-II"><a class="header-anchor" href="#Coins-in-a-line-II"> &gt; </a>Coins in a line II</h2>
<ul>
<li>
<p>Problem: <a target="_blank" rel="noopener" href="http://www.lintcode.com/en/problem/coins-in-a-line-ii/">http://www.lintcode.com/en/problem/coins-in-a-line-ii/</a></p>
<p>This problem starts taking coins from the left side.</p>
</li>
<li>
<p>Solution:</p>
<ol>
<li>DP</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    @param: values: a vector of integers</span></span><br><span class="line"><span class="string">    @return: a boolean which equals to true if the first player will win</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">firstWillWin</span>(<span class="params">self, values</span>):</span><br><span class="line">        n = <span class="built_in">len</span>(values)</span><br><span class="line">        <span class="keyword">if</span> n &lt;= <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        dp = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">        dp[n] = <span class="number">0</span>; dp[n-<span class="number">1</span>] = values[n-<span class="number">1</span>]; dp[n-<span class="number">2</span>] = values[n-<span class="number">1</span>] + values[n-<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">        <span class="built_in">sum</span> = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="built_in">sum</span>[i] = <span class="built_in">sum</span>[i+<span class="number">1</span>] + values[i]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">3</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            dp[i] = <span class="built_in">sum</span>[i] - <span class="built_in">min</span>(dp[i+<span class="number">1</span>], dp[i+<span class="number">2</span>])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>] &gt; <span class="built_in">sum</span>[<span class="number">0</span>] / <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p><code>dp[i]</code> means the max coins can gain from i to end</p>
<p><code>sum[i]</code> means the sum from i to end</p>
<p><code>dp[i] = max(values[i] + sum[i+1] - dp[i+1], values[i] + values[i+1] + sum[i+2] - dp[i+2])</code> =&gt;
<code>dp[i] = sum[i] - min(dp[i+1], dp[i+2])</code></p>
<ol start="2">
<li>Search</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">  <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  @param: values: a vector of integers</span></span><br><span class="line"><span class="string">  @return: a boolean which equals to true if the first player will win</span></span><br><span class="line"><span class="string">  &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">firstWillWin</span>(<span class="params">self, values</span>):</span><br><span class="line">      <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">i, dp, visited</span>):</span><br><span class="line">          <span class="keyword">if</span> visited[i]:</span><br><span class="line">              <span class="keyword">return</span> dp[i]</span><br><span class="line">          <span class="keyword">if</span> i == n:</span><br><span class="line">              dp[i] = <span class="number">0</span></span><br><span class="line">          <span class="keyword">elif</span> i == n - <span class="number">1</span>:</span><br><span class="line">              dp[i] = values[n - <span class="number">1</span>]</span><br><span class="line">          <span class="keyword">elif</span> i == n - <span class="number">2</span>:</span><br><span class="line">              dp[i] = values[n - <span class="number">1</span>] + values[n - <span class="number">2</span>]</span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              dp[i] = self.<span class="built_in">sum</span>[i] - <span class="built_in">min</span>(search(i + <span class="number">1</span>, dp, visited), search(i + <span class="number">2</span>, dp, visited))</span><br><span class="line"></span><br><span class="line">          visited[i] = <span class="literal">True</span></span><br><span class="line">          <span class="keyword">return</span> dp[i]</span><br><span class="line"></span><br><span class="line">      n = <span class="built_in">len</span>(values)</span><br><span class="line">      dp = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">      visited = [<span class="literal">False</span>] * (n + <span class="number">1</span>)</span><br><span class="line">      self.<span class="built_in">sum</span> = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">          self.<span class="built_in">sum</span>[i] = self.<span class="built_in">sum</span>[i + <span class="number">1</span>] + values[i]</span><br><span class="line">      <span class="keyword">return</span> search(<span class="number">0</span>, dp, visited) &gt; self.<span class="built_in">sum</span>[<span class="number">0</span>] / <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Coins-in-a-line-III"><a class="header-anchor" href="#Coins-in-a-line-III"> &gt; </a>Coins in a line III</h2>
<ul>
<li>
<p>Problem:</p>
<p>There are n coins in a line. Two players take turns to take a coin from one of the ends of the line until there are no
more coins left. The player with the larger amount of money wins.</p>
<p>Could you please decide the first player will win or lose?</p>
</li>
<li>
<p>Example</p>
<p>Given array A = [3,2,2], return true.</p>
<p>Given array A = [1,2,4], return true.</p>
<p>Given array A = [1,20,4], return false.</p>
</li>
<li>
<p>Solution:</p>
<ol>
<li>DP</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    @param: values: a vector of integers</span></span><br><span class="line"><span class="string">    @return: a boolean which equals to true if the first player will win</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">firstWillWin</span>(<span class="params">self, values</span>):</span><br><span class="line">        n = <span class="built_in">len</span>(values)</span><br><span class="line">        dp = [[<span class="number">0</span>] * (n+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27; sum for array [i, j), i includes, j excludes &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">sum</span> = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="built_in">sum</span>.append(<span class="built_in">sum</span>[-<span class="number">1</span>] + values[i])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">                <span class="string">&#x27;&#x27;&#x27; initialization &#x27;&#x27;&#x27;</span></span><br><span class="line">                <span class="keyword">if</span> i+<span class="number">1</span> == j:</span><br><span class="line">                    dp[i][j] = values[i]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i][j] = <span class="built_in">sum</span>[j] - <span class="built_in">sum</span>[i] - <span class="built_in">min</span>(dp[i+<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n] &gt; <span class="built_in">sum</span>[n] / <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p><code>dp[i][j]=max(values[i]+sum[i+1][j]-dp[i+1][j], values[j]+sum[i][j-1]-dp[i][j-1])</code></p>
<p><code>values[i]+sum[i+1][j]</code> and <code>values[j]+sum[i][j-1]</code> are equal to <code>sum[i][j]</code></p>
<p>So <code>dp[i][j]=sum[i][j]-min(dp[i+1][j],dp[i][j-1])</code></p>
<ol start="2">
<li>Search</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">  <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  @param: values: a vector of integers</span></span><br><span class="line"><span class="string">  @return: a boolean which equals to true if the first player will win</span></span><br><span class="line"><span class="string">  &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">firstWillWin</span>(<span class="params">self, values</span>):</span><br><span class="line">      <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">start, end, <span class="built_in">sum</span>, dp, visited</span>):</span><br><span class="line">          <span class="keyword">if</span> visited[start][end]:</span><br><span class="line">              <span class="keyword">return</span> dp[start][end]</span><br><span class="line">          <span class="keyword">elif</span> start == end:</span><br><span class="line">              dp[start][end] = <span class="built_in">sum</span>[end] - <span class="built_in">sum</span>[start-<span class="number">1</span>]</span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">              dp[start][end] = <span class="built_in">sum</span>[end] - <span class="built_in">sum</span>[start-<span class="number">1</span>]\</span><br><span class="line">                   - <span class="built_in">min</span>(search(start+<span class="number">1</span>, end, <span class="built_in">sum</span>, dp, visited), search(start, end-<span class="number">1</span>, <span class="built_in">sum</span>, dp, visited))</span><br><span class="line"></span><br><span class="line">          visited[start][end] = <span class="literal">True</span></span><br><span class="line">          <span class="keyword">return</span> dp[start][end]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> values:</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">      n = <span class="built_in">len</span>(values)</span><br><span class="line"></span><br><span class="line">      <span class="built_in">sum</span> = [<span class="number">0</span>] * (n+<span class="number">1</span>)</span><br><span class="line">      <span class="string">&#x27;&#x27;&#x27; sum for array [i, j], i includes, j includes &#x27;&#x27;&#x27;</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">          <span class="built_in">sum</span>[i] = <span class="built_in">sum</span>[i-<span class="number">1</span>] + values[i-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">      dp = [[<span class="number">0</span>] * (n+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)]</span><br><span class="line">      visited = [[<span class="literal">False</span>] * (n+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> search(<span class="number">1</span>, n, <span class="built_in">sum</span>, dp, visited) &gt; <span class="built_in">sum</span>[n] / <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
</ul>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
                <div id="disqus_thread"></div>
                <p class="copyright text-muted">
                    &copy; 2017-2019 Ting Zhou
                </p>
                <p class="copyright text-muted">
                    Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
                </p>
            </div>
        </div>
    </div>
</footer>


    <script>
        var disqus_shortname = 'ztlevi';
        var if_show = true;
        
        var disqus_url = 'https://ztlevi.github.io/posts/Game-theory-Solutions-for-coins-in-a-line/';
        var regex = /ztlevi\.github\.io\/about/
        if_show = !regex.test(disqus_url);
        
        // about me page not showing disqus
        if (if_show) {
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document,
                    s = d.createElement('script');
                s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        }
    </script>
    


    


    <!-- After Footer Scripts -->

<script src="/js/jquery-3.2.1.min.js"></script>


<script src="/js/highlight.pack.js"></script>


<script src="/js/search.js"></script>


<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>


   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


  </body>
</html>

